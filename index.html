<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WhatsApp Panel Launcher</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body, html { 
            margin: 0; padding: 0; height: 100%; overflow: hidden; 
            background: #229953; color: #25D366; 
            font-family: 'JetBrains Mono', monospace; 
        }
        
        #loading {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100%; text-align: center;
        }
        
        .logo { font-size: 40px; margin-bottom: 20px; }
        
        .spinner {
            border: 3px solid rgba(37, 211, 102, 0.2); 
            border-top: 3px solid #25D366;
            border-radius: 50%; width: 50px; height: 50px;
            animation: spin 0.8s linear infinite; margin-bottom: 30px;
        }
        
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .status-text { font-size: 14px; letter-spacing: 2px; color: #5c6b7f; }
        .blink { animation: blinker 1.5s linear infinite; }
        @keyframes blinker { 50% { opacity: 0.5; } }

        /* Progress Bar style */
        .progress-bar {
            width: 200px; height: 4px; background: #111; margin-top: 15px; border-radius: 2px; overflow: hidden;
        }
        .progress-fill {
            height: 100%; background: #25D366; width: 0%; transition: width 0.5s;
        }
    </style>
</head>
<body>

    <div id="loading">
        <div class="logo">⚠️</div>
        <div class="spinner"></div>
        <div class="status-text blink" id="status">MEMUAT DATA...</div>
        <div class="progress-bar"><div class="progress-fill" id="pfill"></div></div>
    </div>

    <script>
        // ================= CONFIG =================
        // PASTE ID & KEY YANG SAMA DISINI
        const BIN_ID = '693151eed0ea881f40121ca6'; 
        const API_KEY = '$2a$10$u00Qvq6xrri32tc7bEYVhuQv94XS.ygeVCr70UDbzoOVlR8yLuUq.'; 
        
        // LINK UTAMA / FALLBACK (Jika error atau refresh)
        const MAIN_URL = 'https://xgenzy.github.io/RVO/';
        // ==========================================

        async function connect() {
            const status = document.getElementById('status');
            const pfill = document.getElementById('pfill');
            
            try {
                // 1. Tanya Database: "Mana Link Termux Sekarang?"
                pfill.style.width = "30%";
                status.innerText = "DATA DIMUAT...";
                
                const res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                    headers: { 'X-Master-Key': API_KEY }
                });
                
                if (!res.ok) throw new Error("Database Error");
                
                const data = await res.json();
                const targetUrl = data.record.url;

                // Cek validitas URL
                if (!targetUrl || targetUrl.trim() === "") {
                    throw new Error("No URL Found");
                }

                // 2. Link Ketemu!
                pfill.style.width = "60%";
                status.innerText = "SELESAI";
                
                // 3. Pindah Halaman Otomatis ke Link Cloudflare/Termux
                pfill.style.width = "100%";
                
                setTimeout(() => {
                    window.location.href = targetUrl;
                }, 1000);

            } catch (e) {
                // ================= LOGIKA FALLBACK =================
                // Jika error (refresh manual, link mati, db error)
                // Kembali ke halaman utama (RVO)
                pfill.style.width = "100%";
                pfill.style.background = "#ff9900"; // Warna Orange tanda warning
                status.style.color = "#ff9900";
                
                console.error(e); // Log error di console untuk debug
                
                status.innerHTML = `CONNECTION LOST.<br>RETURN TO MAIN SERVER...`;
                
                // Redirect otomatis ke link RVO setelah 2 detik
                setTimeout(() => {
                    window.location.href = MAIN_URL;
                }, 2000);
            }
        }

        window.onload = connect;
    </script>
</body>
</html>
